---
import '../../../components/player.page.ts';
import playerData from '../../../data/players.json';
import { playerDataService, PlayerData } from '../../../services/playerdata/playerdata.service.ts';

const { params } = Astro.request;
const serverJsonData: PlayerData = await playerDataService.getData(params.playerId);
export function getStaticPaths() {
  return playerData.data;
}

const props = {
  'player-name': params.playerName,
  'player-id': params.playerId,
  'team-id': serverJsonData.playerInfo.teamId,
  'server-json-data': JSON.stringify(serverJsonData)
};
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <title>{params.playerName} - better-kickbase</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content={`Spielerprofil von ${params.playerName} - better-kickbase-web`} />
    <style>
      body {
        max-width: 768px;
        width: 768px;
        height: 100%;
        border-left: 1px solid #ececec;
        border-right: 1px solid #ececec;
        min-height: 100vh;
        margin: 0;
        background-color: white;
      }

      @media screen and (max-width: 769px) {
        body {
          width: 100%;
          max-width: 100%;
          border: 0px solid #ececec;
        }
      }

      html {
        width: 100vw;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: #f6f6f6;
      }

      :root,
      * {
        font-family: Helvetica, 'Trebuchet MS', Verdana, sans-serif;
      }
    </style>
  </head>
  <body>
    <link rel="preload" as="image" href={serverJsonData.playerInfo.profileBig} />
    <bkb-player {...props} client:idle></bkb-player>
  </body>
</html>
