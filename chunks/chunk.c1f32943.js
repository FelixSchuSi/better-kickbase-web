var F={},N=9;if(typeof Element<"u"&&!Element.prototype.matches){var g=Element.prototype;g.matches=g.matchesSelector||g.mozMatchesSelector||g.msMatchesSelector||g.oMatchesSelector||g.webkitMatchesSelector}function B(r,t){for(;r&&r.nodeType!==N;){if(typeof r.matches=="function"&&r.matches(t))return r;r=r.parentNode}}var K=B,V=K;function W(r,t,e,n,a){var i=z.apply(this,arguments);return r.addEventListener(e,i,a),{destroy:function(){r.removeEventListener(e,i,a)}}}function z(r,t,e,n){return function(a){a.delegateTarget=V(a.target,t),a.delegateTarget&&n.call(r,a)}}var G=W,w={};Object.defineProperty(w,"__esModule",{value:!0});var I=function(){function r(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();function X(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var Y=w.Cache=function(){function r(){X(this,r),this.pages={},this.last=null}return I(r,[{key:"cacheUrl",value:function(e){e.url in this.pages||(this.pages[e.url]=e),this.last=this.pages[e.url],this.swup.log("Cache ("+Object.keys(this.pages).length+")",this.pages)}},{key:"getPage",value:function(e){return this.pages[e]}},{key:"getCurrentPage",value:function(){return this.getPage(window.location.pathname+window.location.search)}},{key:"exists",value:function(e){return e in this.pages}},{key:"empty",value:function(){this.pages={},this.last=null,this.swup.log("Cache cleared")}},{key:"remove",value:function(e){delete this.pages[e]}}]),r}();w.default=Y;var P={},o={},b={};Object.defineProperty(b,"__esModule",{value:!0});var J=function(t){var e=t.toString().toLowerCase().replace(/\s+/g,"-").replace(/\//g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"");return e[0]==="/"&&(e=e.splice(1)),e===""&&(e="homepage"),e};b.default=J;var k={};Object.defineProperty(k,"__esModule",{value:!0});var Q=function(t){window.history.pushState({url:t||window.location.href.split(window.location.hostname)[1],random:Math.random(),source:"swup"},document.getElementsByTagName("title")[0].innerText,t||window.location.href.split(window.location.hostname)[1])};k.default=Q;var S={},h={};Object.defineProperty(h,"__esModule",{value:!0});h.query=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return typeof t!="string"?t:e.querySelector(t)};h.queryAll=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return typeof t!="string"?t:Array.prototype.slice.call(e.querySelectorAll(t))};Object.defineProperty(S,"__esModule",{value:!0});var Z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_=h,ee=function(t,e){var n=document.createElement("html");n.innerHTML=t;for(var a=[],i=function(f){if(n.querySelector(e[f])==null)return{v:null};(0,_.queryAll)(e[f]).forEach(function(ft,x){(0,_.queryAll)(e[f],n)[x].setAttribute("data-swup",a.length),a.push((0,_.queryAll)(e[f],n)[x].outerHTML)})},l=0;l<e.length;l++){var s=i(l);if((typeof s>"u"?"undefined":Z(s))==="object")return s.v}var c={title:n.querySelector("title").innerText,pageClass:n.querySelector("body").className,originalContent:t,blocks:a};return n.innerHTML="",n=null,c};S.default=ee;var H={};Object.defineProperty(H,"__esModule",{value:!0});var te=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},ne=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n={url:window.location.pathname+window.location.search,method:"GET",data:null,headers:{}},a=te({},n,t),i=new XMLHttpRequest;return i.onreadystatechange=function(){i.readyState===4&&(i.status,e(i))},i.open(a.method,a.url,!0),Object.keys(a.headers).forEach(function(l){i.setRequestHeader(l,a.headers[l])}),i.send(a.data),i};H.default=ne;var O={};Object.defineProperty(O,"__esModule",{value:!0});var re=function(){var t=document.createElement("div"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(t.style[n]!==void 0)return e[n];return!1};O.default=re;var L={};Object.defineProperty(L,"__esModule",{value:!0});var ae=function(){return window.location.pathname+window.location.search};L.default=ae;var T={};Object.defineProperty(T,"__esModule",{value:!0});var U=h,ie=function(t,e){for(var n=0,a=function(s){t.querySelector(e[s])==null?console.warn("Element "+e[s]+" is not in current page."):(0,U.queryAll)(e[s]).forEach(function(c,v){(0,U.queryAll)(e[s],t)[v].setAttribute("data-swup",n),n++})},i=0;i<e.length;i++)a(i)};T.default=ie;var M={};Object.defineProperty(M,"__esModule",{value:!0});var oe=function(){function r(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}();function se(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var le=function(){function r(t){se(this,r),t instanceof Element||t instanceof SVGElement?this.link=t:(this.link=document.createElement("a"),this.link.href=t)}return oe(r,[{key:"getPath",value:function(){var e=this.link.pathname;return e[0]!=="/"&&(e="/"+e),e}},{key:"getAddress",value:function(){var e=this.link.pathname+this.link.search;return this.link.getAttribute("xlink:href")&&(e=this.link.getAttribute("xlink:href")),e[0]!=="/"&&(e="/"+e),e}},{key:"getHash",value:function(){return this.link.hash}}]),r}();M.default=le;Object.defineProperty(o,"__esModule",{value:!0});o.Link=o.markSwupElements=o.getCurrentUrl=o.transitionEnd=o.fetch=o.getDataFromHtml=o.createHistoryRecord=o.classify=void 0;var ue=b,ce=d(ue),fe=k,de=d(fe),he=S,ge=d(he),me=H,ve=d(me),pe=O,ye=d(pe),we=L,_e=d(we),Ee=T,Pe=d(Ee),be=M,ke=d(be);function d(r){return r&&r.__esModule?r:{default:r}}o.classify=ce.default;o.createHistoryRecord=de.default;o.getDataFromHtml=ge.default;o.fetch=ve.default;o.transitionEnd=ye.default;o.getCurrentUrl=_e.default;o.markSwupElements=Pe.default;o.Link=ke.default;Object.defineProperty(P,"__esModule",{value:!0});var Se=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},y=o,He=function(t,e){var n=this,a=[],i=void 0,l=function(){if(n.triggerEvent("animationOutStart"),document.documentElement.classList.add("is-changing"),document.documentElement.classList.add("is-leaving"),document.documentElement.classList.add("is-animating"),e&&document.documentElement.classList.add("is-popstate"),document.documentElement.classList.add("to-"+(0,y.classify)(t.url)),a=n.getAnimationPromises("out"),Promise.all(a).then(function(){n.triggerEvent("animationOutDone")}),!e){var c=void 0;n.scrollToElement!=null?c=t.url+n.scrollToElement:c=t.url,(0,y.createHistoryRecord)(c)}};this.triggerEvent("transitionStart",e),t.customTransition!=null?(this.updateTransition(window.location.pathname,t.url,t.customTransition),document.documentElement.classList.add("to-"+(0,y.classify)(t.customTransition))):this.updateTransition(window.location.pathname,t.url),!e||this.options.animateHistoryBrowsing?l():this.triggerEvent("animationSkipped"),this.cache.exists(t.url)?(i=new Promise(function(s){s()}),this.triggerEvent("pageRetrievedFromCache")):!this.preloadPromise||this.preloadPromise.route!=t.url?i=new Promise(function(s,c){(0,y.fetch)(Se({},t,{headers:n.options.requestHeaders}),function(v){if(v.status===500){n.triggerEvent("serverError"),c(t.url);return}else{var f=n.getPageData(v);if(f!=null)f.url=t.url;else{c(t.url);return}n.cache.cacheUrl(f),n.triggerEvent("pageLoaded")}s()})}):i=this.preloadPromise,Promise.all(a.concat([i])).then(function(){n.renderPage(n.cache.getPage(t.url),e),n.preloadPromise=null}).catch(function(s){n.options.skipPopStateHandling=function(){return window.location=s,!0},window.history.go(-1)})};P.default=He;var C={};Object.defineProperty(C,"__esModule",{value:!0});var Oe=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Le=o,Te=function(t,e){var n=this;document.documentElement.classList.remove("is-leaving");var a=new Le.Link(t.responseURL);window.location.pathname!==a.getPath()&&(window.history.replaceState({url:a.getPath(),random:Math.random(),source:"swup"},document.title,a.getPath()),this.cache.cacheUrl(Oe({},t,{url:a.getPath()}))),(!e||this.options.animateHistoryBrowsing)&&document.documentElement.classList.add("is-rendering"),this.triggerEvent("willReplaceContent",e);for(var i=0;i<t.blocks.length;i++)document.body.querySelector('[data-swup="'+i+'"]').outerHTML=t.blocks[i];if(document.title=t.title,this.triggerEvent("contentReplaced",e),this.triggerEvent("pageView",e),this.options.cache||this.cache.empty(),setTimeout(function(){(!e||n.options.animateHistoryBrowsing)&&(n.triggerEvent("animationInStart"),document.documentElement.classList.remove("is-animating"))},10),!e||this.options.animateHistoryBrowsing){var l=this.getAnimationPromises("in");Promise.all(l).then(function(){n.triggerEvent("animationInDone"),n.triggerEvent("transitionEnd",e),document.documentElement.className.split(" ").forEach(function(s){(new RegExp("^to-").test(s)||s==="is-changing"||s==="is-rendering"||s==="is-popstate")&&document.documentElement.classList.remove(s)})})}else this.triggerEvent("transitionEnd",e);this.scrollToElement=null};C.default=Te;var A={};Object.defineProperty(A,"__esModule",{value:!0});var Me=function(t,e){this._handlers[t].forEach(function(a){try{a(e)}catch(i){console.error(i)}});var n=new CustomEvent("swup:"+t,{detail:t});document.dispatchEvent(n)};A.default=Me;var $={};Object.defineProperty($,"__esModule",{value:!0});var Ce=function(t,e){this._handlers[t]?this._handlers[t].push(e):console.warn("Unsupported event "+t+".")};$.default=Ce;var j={};Object.defineProperty(j,"__esModule",{value:!0});var Ae=function(t,e){var n=this;if(t!=null)if(e!=null)if(this._handlers[t]&&this._handlers[t].filter(function(l){return l===e}).length){var a=this._handlers[t].filter(function(l){return l===e})[0],i=this._handlers[t].indexOf(a);i>-1&&this._handlers[t].splice(i,1)}else console.warn("Handler for event '"+t+"' no found.");else this._handlers[t]=[];else Object.keys(this._handlers).forEach(function(l){n._handlers[l]=[]})};j.default=Ae;var D={};Object.defineProperty(D,"__esModule",{value:!0});var $e=function(t,e,n){this.transition={from:t,to:e,custom:n}};D.default=$e;var R={};Object.defineProperty(R,"__esModule",{value:!0});var je=h,De=o,Re=function(){var t=[],e=(0,je.queryAll)(this.options.animationSelector);return e.forEach(function(n){var a=new Promise(function(i){n.addEventListener((0,De.transitionEnd)(),function(l){n==l.target&&i()})});t.push(a)}),t};R.default=Re;var q={};Object.defineProperty(q,"__esModule",{value:!0});var qe=o,xe=function(t){var e=t.responseText,n=(0,qe.getDataFromHtml)(e,this.options.containers);if(n)n.responseURL=t.responseURL?t.responseURL:window.location.href;else return console.warn("Received page is invalid."),null;return n};q.default=xe;var p={};Object.defineProperty(p,"__esModule",{value:!0});p.use=function(t){if(!t.isSwupPlugin){console.warn("Not swup plugin instance "+t+".");return}return this.plugins.push(t),t.swup=this,typeof t._beforeMount=="function"&&t._beforeMount(),t.mount(),this.plugins};p.unuse=function(t){var e=void 0;if(typeof t=="string"?e=this.plugins.find(function(a){return t===a.name}):e=t,!e){console.warn("No such plugin.");return}e.unmount(),typeof e._afterUnmount=="function"&&e._afterUnmount();var n=this.plugins.indexOf(e);return this.plugins.splice(n,1),this.plugins};p.findPlugin=function(t){return this.plugins.find(function(e){return t===e.name})};Object.defineProperty(F,"__esModule",{value:!0});var Ue=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Fe=function(){function r(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),Ne=G,Be=u(Ne),Ke=w,Ve=u(Ke),We=P,ze=u(We),Ge=C,Ie=u(Ge),Xe=A,Ye=u(Xe),Je=$,Qe=u(Je),Ze=j,et=u(Ze),tt=D,nt=u(tt),rt=R,at=u(rt),it=q,ot=u(it),E=p,st=h,m=o;function u(r){return r&&r.__esModule?r:{default:r}}function lt(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}var ut=function(){function r(t){lt(this,r);var e={animateHistoryBrowsing:!1,animationSelector:'[class*="transition-"]',linkSelector:'a[href^="'+window.location.origin+'"]:not([data-no-swup]), a[href^="/"]:not([data-no-swup]), a[href^="#"]:not([data-no-swup])',cache:!0,containers:["#swup"],requestHeaders:{"X-Requested-With":"swup",Accept:"text/html, application/xhtml+xml"},plugins:[],skipPopStateHandling:function(i){return!(i.state&&i.state.source==="swup")}},n=Ue({},e,t);this._handlers={animationInDone:[],animationInStart:[],animationOutDone:[],animationOutStart:[],animationSkipped:[],clickLink:[],contentReplaced:[],disabled:[],enabled:[],openPageInNewTab:[],pageLoaded:[],pageRetrievedFromCache:[],pageView:[],popState:[],samePage:[],samePageWithHash:[],serverError:[],transitionStart:[],transitionEnd:[],willReplaceContent:[]},this.scrollToElement=null,this.preloadPromise=null,this.options=n,this.plugins=[],this.transition={},this.delegatedListeners={},this.boundPopStateHandler=this.popStateHandler.bind(this),this.cache=new Ve.default,this.cache.swup=this,this.loadPage=ze.default,this.renderPage=Ie.default,this.triggerEvent=Ye.default,this.on=Qe.default,this.off=et.default,this.updateTransition=nt.default,this.getAnimationPromises=at.default,this.getPageData=ot.default,this.log=function(){},this.use=E.use,this.unuse=E.unuse,this.findPlugin=E.findPlugin,this.enable()}return Fe(r,[{key:"enable",value:function(){var e=this;if(typeof Promise>"u"){console.warn("Promise is not supported");return}this.delegatedListeners.click=(0,Be.default)(document,this.options.linkSelector,"click",this.linkClickHandler.bind(this)),window.addEventListener("popstate",this.boundPopStateHandler);var n=(0,m.getDataFromHtml)(document.documentElement.outerHTML,this.options.containers);n.url=n.responseURL=(0,m.getCurrentUrl)(),this.options.cache&&this.cache.cacheUrl(n),(0,m.markSwupElements)(document.documentElement,this.options.containers),this.options.plugins.forEach(function(a){e.use(a)}),window.history.replaceState(Object.assign({},window.history.state,{url:window.location.href,random:Math.random(),source:"swup"}),document.title,window.location.href),this.triggerEvent("enabled"),document.documentElement.classList.add("swup-enabled"),this.triggerEvent("pageView")}},{key:"destroy",value:function(){var e=this;this.delegatedListeners.click.destroy(),window.removeEventListener("popstate",this.boundPopStateHandler),this.cache.empty(),this.options.plugins.forEach(function(n){e.unuse(n)}),(0,st.queryAll)("[data-swup]").forEach(function(n){n.removeAttribute("data-swup")}),this.off(),this.triggerEvent("disabled"),document.documentElement.classList.remove("swup-enabled")}},{key:"linkClickHandler",value:function(e){if(!e.metaKey&&!e.ctrlKey&&!e.shiftKey&&!e.altKey){if(e.button===0){this.triggerEvent("clickLink",e),e.preventDefault();var n=new m.Link(e.delegateTarget);if(n.getAddress()==(0,m.getCurrentUrl)()||n.getAddress()=="")if(n.getHash()!=""){this.triggerEvent("samePageWithHash",e);var a=document.querySelector(n.getHash());a!=null?history.replaceState({url:n.getAddress()+n.getHash(),random:Math.random(),source:"swup"},document.title,n.getAddress()+n.getHash()):console.warn("Element for offset not found ("+n.getHash()+")")}else this.triggerEvent("samePage",e);else{n.getHash()!=""&&(this.scrollToElement=n.getHash());var i=e.delegateTarget.getAttribute("data-swup-transition");this.loadPage({url:n.getAddress(),customTransition:i},!1)}}}else this.triggerEvent("openPageInNewTab",e)}},{key:"popStateHandler",value:function(e){if(!this.options.skipPopStateHandling(e)){var n=new m.Link(e.state?e.state.url:window.location.pathname);n.getHash()!==""?this.scrollToElement=n.getHash():e.preventDefault(),this.triggerEvent("popState",e),this.loadPage({url:n.getAddress()},e)}}}]),r}(),ct=F.default=ut;new ct;
